- name: create AWS instances
  hosts: localhost

  roles:
    - aws-anomaly-infrastructure

- name: setup monitoring
  hosts: monitoring
  remote_user: ubuntu
  become: yes
  become_method: sudo

  roles:
    - docker-common
    - influxdb-docker
    - elk-docker
    - grafana-docker
    - riemann-docker

- name: setup database
  hosts: cassandra
  serial: 1
  remote_user: ubuntu
  become: yes
  become_method: sudo

  roles:
    - java
    - cassandra
    - cassandra-diagnostics
    - cassandra-seed-delay
